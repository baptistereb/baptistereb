<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>--</title>
<link rel="icon" type="image/png" sizes="32x32" href="https://baptiste-reb.fr/img/favicon-32x32.png">
<style>
  :root{
    --bg:#000;
    --fg:#00ff66;
    --accent:#00d8ff;
    --muted:rgba(0,255,102,0.12);
    --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", "Courier New", monospace;
  }
  html,body{height:100%;margin:0;background:var(--bg);font-family:var(--mono);color:var(--fg);-webkit-font-smoothing:antialiased}
  /* matrix canvas fills background */
  #matrix {
    position:fixed; inset:0; width:100%; height:100%; z-index:0;
    background:black;
  }
  .overlay{position:relative;z-index:2;display:flex;align-items:center;justify-content:center;height:100%;}
  .terminal {
    width:min(920px,94%); max-width:960px; background:rgba(0,0,0,0.5); border:1px solid var(--muted);
    box-shadow:0 20px 60px rgba(0,0,0,0.8), 0 0 40px rgba(0,255,102,0.03) inset;
    border-radius:12px; padding:18px; box-sizing:border-box; backdrop-filter:blur(4px);
    min-height:360px; display:flex; flex-direction:column; gap:12px;
  }
  .header{display:flex;align-items:center;gap:12px}
  .logo {
    width:52px;height:52px;border-radius:8px;border:1px solid rgba(0,255,102,0.06);
    display:flex;align-items:center;justify-content:center;font-weight:700;
    box-shadow:0 6px 18px rgba(0,0,0,0.6);
    background:linear-gradient(180deg,#00110a,#00190f);
    color:var(--fg); font-size:13px;
  }
  .title{font-size:15px;letter-spacing:0.6px}
  .subtitle{font-size:12px;color:rgba(0,255,102,0.6)}
  .screen{flex:1; overflow:auto; padding:12px;border-radius:8px;background:linear-gradient(180deg, rgba(0,0,0,0.0), rgba(0,0,0,0.02)); border:1px solid rgba(0,255,102,0.02)}
  .line{white-space:pre-wrap; line-height:1.4; font-size:14px}
  .prompt{color:var(--accent)}
  .input-row{display:flex;gap:8px;align-items:center}
  .cmd-input{
    flex:1;background:transparent;border:0;outline:none;color:var(--fg);
    font-family:var(--mono);font-size:14px;padding:8px 6px;border-radius:6px;
  }
  .hint{font-size:12px;color:rgba(0,255,102,0.35)}
  a.link{color:var(--accent);text-decoration:underline}
  .small{font-size:13px;color:rgba(0,255,102,0.55)}
  .muted{color:rgba(0,255,102,0.18);font-size:12px}
  .btn{background:transparent;border:1px solid rgba(0,255,102,0.06);padding:6px 10px;border-radius:8px;color:var(--fg);font-size:13px}
  .footer{display:flex;justify-content:space-between;align-items:center;gap:12px;font-size:12px;color:rgba(0,255,102,0.32)}
  /* accessibility focus */
  .cmd-input:focus{box-shadow:0 0 18px rgba(0,255,102,0.05) inset}
  /* responsive */
  @media (max-width:640px){
    .terminal{padding:12px;border-radius:8px}
    .logo{width:44px;height:44px;font-size:12px}
  }
</style>
</head>
<body>
<canvas id="matrix" aria-hidden="true"></canvas>

<div class="overlay" role="main">
  <div class="terminal" role="application" aria-label="Terminal interactif de Baptiste Reb">
    <div class="header">
      <div class="logo" aria-hidden="true">BR</div>
      <div>
        <div class="title">baptiste-reb — personal node</div>
        <div class="subtitle">/ quick shell — type <span class="hint">help</span> for commands</div>
      </div>
    </div>

    <div class="screen" id="screen" tabindex="0" aria-live="polite">
    </div>

    <div class="input-row" aria-hidden="false">
      <div class="prompt small">&gt; </div>
      <input id="cmd" class="cmd-input" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" aria-label="Invite de commandes" />
      <button id="enterBtn" class="btn" title="Exécuter (Entrée)">run</button>
    </div>

    <div class="footer">
      <div class="muted">Matrix mode • minimal • offline</div>
      <div class="muted">tips: <span class="hint">open</span> / <span class="hint">help</span></div>
    </div>
  </div>
</div>

<script>
/* -----------------------
   Matrix background
   ----------------------- */
(function matrix(){
  const canvas = document.getElementById('matrix');
  const ctx = canvas.getContext('2d');
  let w = canvas.width = innerWidth;
  let h = canvas.height = innerHeight;
  const cols = Math.floor(w / 14);
  const drops = Array(cols).fill(0).map(()=>Math.floor(Math.random() * h));
  const letters = "01><*;:abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZあいうえおかきくけこメト".split('');
  let frameCounter = 0;
  let charged = false;
  setTimeout(() => {charged = true},500)

  function draw(){
    frameCounter++;
    if(frameCounter % 5 !== 0 && charged) return;
    ctx.fillStyle = 'rgba(0,0,0,0.06)';
    ctx.fillRect(0,0,w,h);
    ctx.font = '13px monospace';
    for(let i=0;i<cols;i++){
      const x = i*14;
      const y = drops[i]*14;
      const text = letters[Math.floor(Math.random()*letters.length)];
      ctx.fillStyle = i%8===0 ? '#a8ffcc' : '#00ff66';
      ctx.fillText(text, x, y);
      if(y > h + 100 || Math.random() > 0.985) drops[i]=0;
      else drops[i]++;
    }
  }
  let raf = null;
  function loop(){ draw(); raf = requestAnimationFrame(loop); }
  loop();
  addEventListener('resize',()=>{
    w = canvas.width = innerWidth;
    h = canvas.height = innerHeight;
  });
  // expose toggle
  window._matrixToggle = function(state){
    if(state === false){ cancelAnimationFrame(raf); ctx.clearRect(0,0,w,h); raf = null; }
    else if(!raf) loop();
  };
})();

/* -----------------------
   Terminal logic
   ----------------------- */
(function shell(){
  const screen = document.getElementById('screen');
  const input = document.getElementById('cmd');
  const enter = document.getElementById('enterBtn');
  const SITE = "https://baptiste-reb.fr";
  const promptSymbol = "> ";

  // helper pour afficher du texte
  function print(lines) {
    lines.forEach(l => {
      const div = document.createElement('div');
      div.className = 'line';
      div.innerHTML = l;
      screen.appendChild(div);
    });
    screen.scrollTop = screen.scrollHeight;
  }

  // initial welcome
  print([
    "Type 'help'",
    ""
  ]);

  async function runCommand(raw){
    const cmd = (raw||'').trim();
    if(!cmd) return;

    const echo = document.createElement('div');
    echo.className='line';
    echo.textContent = promptSymbol + cmd;
    screen.appendChild(echo);

    const parts = cmd.split(/\s+/);
    const base = parts[0].toLowerCase();
    const args = parts.slice(1);

    switch(base){
      case 'help':
        print([
          "Commands:",
          "  help           : seriously i've to defined this thing",
          "  links          : my links ;)",
          "  search [text]  : Google search",
          "  ai / ia [text] : Perplexity search",
          "  weather [city] : weather via wttr.in"
        ]);
        break;

      case 'links':
        print(["My website : <a class='link' href='"+SITE+"' target='_blank'>"+SITE+"</a>"]);
        break;

      case 'search':
        if(args.length === 0){ print(["Usage : search [text]"]); break; }
        const q = encodeURIComponent(args.join(' '));
        const url = "https://www.google.com/search?q="+q;
        print(["Google search : <a class='link' href='"+url+"' target='_blank'>"+url+"</a>"]);
        window.open(url, '_blank','noopener');
        break;

      case 'ai':
      case 'ia':
        if(args.length === 0){ print(["Usage : ai [text]"]); break; }
        const query = encodeURIComponent(args.join(' '));
        const aiUrl = "https://www.perplexity.ai/search?q="+query;
        print(["Perplexity AI search : <a class='link' href='"+aiUrl+"' target='_blank'>"+aiUrl+"</a>"]);
        window.open(aiUrl,'_blank','noopener');
        break;

      case 'weather':
        if(args.length===0){ print(["Usage : weather [city]"]); break; }
        const city = encodeURIComponent(args.join(' '));
        const wUrl = "https://wttr.in/"+city+"?format=3";
        fetch(wUrl)
          .then(r=>r.text())
          .then(txt => print([txt]))
          .catch(e=>print(["Error getting the weather"]));
        break;

      default:
        print(["Unknown command : '"+base+"' — type 'help'"]);
        break;
    }

    screen.scrollTop = screen.scrollHeight;
  }

  // gestion Enter
  input.addEventListener('keydown', async e=>{
    if(e.key==='Enter'){ e.preventDefault(); const val=input.value; input.value=''; await runCommand(val); }
  });
  enter.addEventListener('click', async ()=>{
    const val=input.value; input.value=''; await runCommand(val);
  });

  screen.addEventListener('click', ()=> input.focus());
  setTimeout(()=>input.focus(),400);
})();
</script>


</body>
</html>
